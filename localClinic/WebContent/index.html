<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Clinic Admin Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
        }

        .sidebar {
            min-height: 100vh;
            background-color: #343a40;
            color: #fff;
            padding-top: 20px;
        }

            .sidebar a {
                color: #fff;
                display: block;
                padding: 10px 12px;
                margin: 4px 8px;
                border-radius: .375rem;
                text-decoration: none;
            }

                .sidebar a.active, .sidebar a:hover {
                    background-color: #495057;
                }

        .card-counter {
            padding: 24px;
            border-radius: 12px;
            color: #fff;
            text-align: center;
            box-shadow: 0 6px 20px rgba(0,0,0,.08);
        }

        .bg-blue {
            background-color: #0d6efd;
        }

        .bg-green {
            background-color: #198754;
        }

        .section-title {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
        }

        .form-inline-grid .form-control, .form-inline-grid .form-select {
            margin-bottom: .5rem;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <nav class="col-md-2 sidebar">
                <h4 class="text-center mb-3">Clinic Admin</h4>
                <a href="#" class="active" onclick="navTo('adminDashboard', this)">Admin Dashboard</a>
                <a href="#" onclick="navTo('doctorPanel', this)">Doctor Panel</a>
                <a href="#" onclick="navTo('patientPanel', this)">Patient Panel</a>
                <a href="#" onclick="navTo('bookingPanel', this)">Booking Panel</a>
                <a href="#" onclick="navTo('schedulePanel', this)">Schedule Panel</a>
                <a href="#" onclick="navTo('receiptPanel', this)">Receipt Panel</a>
            </nav>

            <!-- Main Content -->
            <main class="col-md-10 p-4">
                <!-- Admin Dashboard -->
                <section id="adminDashboard">
                    <h3>Admin Dashboard</h3>
                    <div class="row g-3 mt-2">
                        <div class="col-md-4">
                            <div class="card-counter bg-blue">
                                <h6 class="m-0">Total Doctors</h6>
                                <h1 id="totalDoctors" class="m-0">0</h1>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card-counter bg-green">
                                <h6 class="m-0">Total Patients</h6>
                                <h1 id="totalPatients" class="m-0">0</h1>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Doctor Panel -->
                <section id="doctorPanel" style="display:none;">
                    <div class="section-title">
                        <h3>Doctor Management</h3>
                        <button class="btn btn-primary" onclick="toggleDoctorForm()">Add Doctor</button>
                    </div>
                    <form id="doctorForm" class="mt-3 p-3 border rounded" style="display:none;">
                        <input type="hidden" id="doctorId">
                        <div class="row form-inline-grid">
                            <div class="col-md-3"><label class="form-label">Doctor Name</label><input id="doctorName" class="form-control" required></div>
                            <div class="col-md-2"><label class="form-label">Gender</label><select id="doctorGender" class="form-select" required><option value="">Select</option><option>Male</option><option>Female</option></select></div>
                            <div class="col-md-3"><label class="form-label">Phone</label><input id="doctorPhone" class="form-control" required></div>
                            <div class="col-md-4"><label class="form-label">Address</label><input id="doctorAddress" class="form-control" required></div>
                            <div class="col-md-4"><label class="form-label">Specialty</label><input id="doctorSpecialty" class="form-control" required></div>
                            <div class="col-md-3 d-flex align-items-end gap-2"><button type="submit" class="btn btn-success">Save</button><button type="button" class="btn btn-outline-secondary" onclick="resetDoctorForm()">Cancel</button></div>
                        </div>
                    </form>
                    <div class="table-responsive mt-3">
                        <table class="table table-striped align-middle">
                            <thead class="table-light"><tr><th>ID</th><th>Name</th><th>Gender</th><th>Phone</th><th>Address</th><th>Specialty</th><th>Actions</th></tr></thead>
                            <tbody id="doctorTableBody"></tbody>
                        </table>
                    </div>
                </section>

                <!-- Patient Panel -->
                <section id="patientPanel" style="display:none;">
                    <div class="section-title">
                        <h3>Patient Management</h3>
                        <button class="btn btn-primary" onclick="togglePatientForm()">Add Patient</button>
                    </div>
                    <form id="patientForm" class="mt-3 p-3 border rounded" style="display:none;">
                        <input type="hidden" id="patientId">
                        <div class="row form-inline-grid">
                            <div class="col-md-3"><label class="form-label">Patient Name</label><input id="patientName" class="form-control" required></div>
                            <div class="col-md-2"><label class="form-label">Gender</label><select id="patientGender" class="form-select" required><option value="">Select</option><option>Male</option><option>Female</option></select></div>
                            <div class="col-md-3"><label class="form-label">Phone</label><input id="patientPhone" class="form-control" required></div>
                            <div class="col-md-4"><label class="form-label">Address</label><input id="patientAddress" class="form-control" required></div>
                            <div class="col-md-3"><label class="form-label">Date of Birth</label><input id="patientDob" type="date" class="form-control" required></div>
                            <div class="col-md-3 d-flex align-items-end gap-2"><button type="submit" class="btn btn-success">Save</button><button type="button" class="btn btn-outline-secondary" onclick="resetPatientForm()">Cancel</button></div>
                        </div>
                    </form>
                    <div class="table-responsive mt-3">
                        <table class="table table-striped align-middle">
                            <thead class="table-light"><tr><th>ID</th><th>Name</th><th>Gender</th><th>Phone</th><th>Address</th><th>DOB</th><th>Actions</th></tr></thead>
                            <tbody id="patientTableBody"></tbody>
                        </table>
                    </div>
                </section>

                <!-- Booking Panel -->
                <section id="bookingPanel" style="display:none;">
                    <div class="section-title">
                        <h3>Booking Management</h3>
                        <button class="btn btn-primary" onclick="openBookingForm()">Add Booking</button>
                    </div>
                    <div class="table-responsive mt-3">
                        <table class="table table-striped align-middle">
                            <thead class="table-light"><tr><th>No</th><th>Doctor</th><th>Patient</th><th>Date</th><th>Time</th><th>Actions</th></tr></thead>
                            <tbody id="bookingTableBody"></tbody>
                        </table>
                    </div>
                </section>

                <!-- Modal for Booking Form -->
                <div class="modal fade" id="bookingModal" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <form id="bookingForm">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="bookingModalLabel">Add Booking</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                </div>
                                <div class="modal-body">
                                    <input type="hidden" id="bookingId">
                                    <div class="mb-3"><label>Doctor</label><select id="bookingDoctor" class="form-select" required></select></div>
                                    <div class="mb-3"><label>Patient</label><select id="bookingPatient" class="form-select" required></select></div>
                                    <div class="mb-3"><label>Date</label><input type="date" id="bookingDate" class="form-control" required></div>
                                    <div class="mb-3"><label>Time</label><input type="time" id="bookingTime" class="form-control" required></div>
                                </div>
                                <div class="modal-footer"><button type="submit" class="btn btn-success">Save</button></div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Placeholder Sections -->
                <section id="schedulePanel" style="display:none;"><h3>Doctor Schedule (Coming Soon)</h3></section>
                <section id="receiptPanel" style="display:none;"><h3>Receipts (Coming Soon)</h3></section>
            </main>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
// Data storage using localStorage
const LS = {
  doctors: 'clinic_doctors',
  patients: 'clinic_patients',
  bookings: 'clinic_bookings'
};

function loadData(key) { return JSON.parse(localStorage.getItem(key)) || []; }
function saveData(key, arr) { localStorage.setItem(key, JSON.stringify(arr)); }

let doctors = loadData(LS.doctors), patients = loadData(LS.patients), bookings = loadData(LS.bookings);
let doctorCounter = doctors.reduce((max, d) => Math.max(max, d.id), 0) + 1;
let patientCounter = patients.reduce((max, p) => Math.max(max, p.id), 0) + 1;

// Navigation logic
function navTo(sectionId, el) {
  document.querySelectorAll('main > section').forEach(sec => sec.style.display = 'none');
  document.getElementById(sectionId).style.display = 'block';
  document.querySelectorAll('.sidebar a').forEach(a => a.classList.remove('active'));
  if (el) el.classList.add('active');
  updateCounts();
}

// Dashboard counts
function updateCounts() {
  document.getElementById('totalDoctors').textContent = doctors.length;
  document.getElementById('totalPatients').textContent = patients.length;
}

// ---------------- Doctor CRUD ----------------
function toggleDoctorForm() { document.getElementById('doctorForm').style.display = (document.getElementById('doctorForm').style.display === 'none' ? 'block' : 'none'); }
function resetDoctorForm() {
  document.getElementById('doctorForm').reset();
  document.getElementById('doctorId').value = '';
  toggleDoctorForm();
}
function renderDoctors() {
  const tbody = document.getElementById('doctorTableBody');
  tbody.innerHTML = doctors.map(d => `
    <tr>
      <td>${d.id}</td><td>${d.name}</td><td>${d.gender}</td><td>${d.phone}</td><td>${d.address}</td><td>${d.specialty}</td>
      <td>
        <button class="btn btn-sm btn-warning me-1" onclick="editDoctor(${d.id})">Edit</button>
        <button class="btn btn-sm btn-danger" onclick="deleteDoctor(${d.id})">Delete</button>
      </td>
    </tr>`
  ).join('');
}
document.getElementById('doctorForm').addEventListener('submit', e => {
  e.preventDefault();
  const id = document.getElementById('doctorId').value;
  const data = {
    name: document.getElementById('doctorName').value,
    gender: document.getElementById('doctorGender').value,
    phone: document.getElementById('doctorPhone').value,
    address: document.getElementById('doctorAddress').value,
    specialty: document.getElementById('doctorSpecialty').value
  };
  if (id) doctors = doctors.map(d => d.id == id ? { id: Number(id), ...data } : d);
  else doctors.push({ id: doctorCounter++, ...data });
  saveData(LS.doctors, doctors);
  renderDoctors(); updateCounts(); resetDoctorForm();
});
function editDoctor(id) {
  const d = doctors.find(d => d.id === id);
  if (!d) return;
  document.getElementById('doctorId').value = d.id;
  document.getElementById('doctorName').value = d.name;
  document.getElementById('doctorGender').value = d.gender;
  document.getElementById('doctorPhone').value = d.phone;
  document.getElementById('doctorAddress').value = d.address;
  document.getElementById('doctorSpecialty').value = d.specialty;
  document.getElementById('doctorForm').style.display = 'block';
}
function deleteDoctor(id) {
  if (!confirm('Delete this doctor?')) return;
  doctors = doctors.filter(d => d.id !== id);
  saveData(LS.doctors, doctors);
  renderDoctors(); updateCounts();
}

// ---------------- Patient CRUD ----------------
function togglePatientForm() { document.getElementById('patientForm').style.display = (document.getElementById('patientForm').style.display === 'none' ? 'block' : 'none'); }
function resetPatientForm() {
  document.getElementById('patientForm').reset();
  document.getElementById('patientId').value = '';
  togglePatientForm();
}
function renderPatients() {
  const tbody = document.getElementById('patientTableBody');
  tbody.innerHTML = patients.map(p => `
    <tr>
      <td>${p.id}</td><td>${p.name}</td><td>${p.gender}</td><td>${p.phone}</td><td>${p.address}</td><td>${p.dob}</td>
      <td>
        <button class="btn btn-sm btn-warning me-1" onclick="editPatient(${p.id})">Edit</button>
        <button class="btn btn-sm btn-danger" onclick="deletePatient(${p.id})">Delete</button>
      </td>
    </tr>`
  ).join('');
}
document.getElementById('patientForm').addEventListener('submit', e => {
  e.preventDefault();
  const id = document.getElementById('patientId').value;
  const data = {
    name: document.getElementById('patientName').value,
    gender: document.getElementById('patientGender').value,
    phone: document.getElementById('patientPhone').value,
    address: document.getElementById('patientAddress').value,
    dob: document.getElementById('patientDob').value
  };
  if (id) patients = patients.map(p => p.id == id ? { id: Number(id), ...data } : p);
  else patients.push({ id: patientCounter++, ...data });
  saveData(LS.patients, patients);
  renderPatients(); updateCounts(); resetPatientForm();
});
function editPatient(id) {
  const p = patients.find(p => p.id === id);
  if (!p) return;
  document.getElementById('patientId').value = p.id;
  document.getElementById('patientName').value = p.name;
  document.getElementById('patientGender').value = p.gender;
  document.getElementById('patientPhone').value = p.phone;
  document.getElementById('patientAddress').value = p.address;
  document.getElementById('patientDob').value = p.dob;
  document.getElementById('patientForm').style.display = 'block';
}
function deletePatient(id) {
  if (!confirm('Delete this patient?')) return;
  patients = patients.filter(p => p.id !== id);
  saveData(LS.patients, patients);
  renderPatients(); updateCounts();
}

// ---------------- Booking CRUD ----------------
function openBookingForm() {
  document.getElementById('bookingForm').reset();
  document.getElementById('bookingId').value = '';
  document.getElementById('bookingModalLabel').textContent = 'Add Booking';
  populateBookingDropdowns();
  new bootstrap.Modal(document.getElementById('bookingModal')).show();
}
function populateBookingDropdowns() {
  const db = document.getElementById('bookingDoctor'), pb = document.getElementById('bookingPatient');
  db.innerHTML = doctors.map(d => `<option value="${d.name}">${d.name}</option>`).join('');
  pb.innerHTML = patients.map(p => `<option value="${p.name}">${p.name}</option>`).join('');
}
function renderBookings() {
  const tbody = document.getElementById('bookingTableBody');
  tbody.innerHTML = bookings.map((b, i) => `
    <tr>
      <td>${i+1}</td><td>${b.doctor}</td><td>${b.patient}</td><td>${b.date}</td><td>${b.time}</td>
      <td>
        <button class="btn btn-sm btn-warning me-1" onclick="editBooking(${i})">Edit</button>
        <button class="btn btn-sm btn-danger" onclick="deleteBooking(${i})">Delete</button>
      </td>
    </tr>`
  ).join('');
}
document.getElementById('bookingForm').addEventListener('submit', e => {
  e.preventDefault();
  const id = document.getElementById('bookingId').value;
  const data = {
    doctor: document.getElementById('bookingDoctor').value,
    patient: document.getElementById('bookingPatient').value,
    date: document.getElementById('bookingDate').value,
    time: document.getElementById('bookingTime').value
  };
  if (id !== '') bookings[id] = data;
  else bookings.push(data);
  saveData(LS.bookings, bookings);
  renderBookings();
  new bootstrap.Modal(document.getElementById('bookingModal')).hide();
});
function editBooking(idx) {
  const b = bookings[idx];
  document.getElementById('bookingDoctor').value = b.doctor;
  document.getElementById('bookingPatient').value = b.patient;
  document.getElementById('bookingDate').value = b.date;
  document.getElementById('bookingTime').value = b.time;
  document.getElementById('bookingId').value = idx;
  document.getElementById('bookingModalLabel').textContent = 'Edit Booking';
  populateBookingDropdowns();
  new bootstrap.Modal(document.getElementById('bookingModal')).show();
}
function deleteBooking(idx) {
  if (!confirm('Delete this booking?')) return;
  bookings.splice(idx, 1);
  saveData(LS.bookings, bookings);
  renderBookings();
}

// ---------------- Initialize ----------------
function init() {
  renderDoctors(); renderPatients(); renderBookings();
  navTo('adminDashboard');
}
init();
    </script>
</body>
</html>
